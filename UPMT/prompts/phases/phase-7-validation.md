# PHASE 7: COMPLETENESS VALIDATION

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 30 –º–∏–Ω—É—Ç (–∞–≤—Ç–æ–Ω–æ–º–Ω–æ)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ 100% –ø–æ–ª–Ω–æ—Ç—ã –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Å–æ–∑–¥–∞–Ω–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

**‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –§–ê–ó–ê - –ù–ò–ß–ï–ì–û –ù–ï –î–û–õ–ñ–ù–û –ë–´–¢–¨ –ü–†–û–ü–£–©–ï–ù–û**

---

## üìã VALIDATION CHECKLIST

### ‚úÖ 1. –ü–†–û–í–ï–†–ö–ê –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–ò

**docs/core/ (6 —Ñ–∞–π–ª–æ–≤):**
- [ ] `00_PROJECT_ESSENCE.md` –∑–∞–ø–æ–ª–Ω–µ–Ω –Ω–∞ 100% (–ù–ï template, –≤—Å–µ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã)
- [ ] `01_PRD.md` —Å–æ–¥–µ—Ä–∂–∏—Ç –í–°–ï –º–æ–¥—É–ª–∏ –∏–∑ `modules_list.md`
- [ ] `02_ROADMAP.md` –∑–∞–ø–æ–ª–Ω–µ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é (—Ñ–∞–∑—ã, timeline, milestones)
- [ ] `03_TECH_STACK.md` –∑–∞–ø–æ–ª–Ω–µ–Ω —Å –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ–º –∫–∞–∂–¥–æ–π —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- [ ] `04_ARCHITECTURE.md` –∑–∞–ø–æ–ª–Ω–µ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é (–¥–∏–∞–≥—Ä–∞–º–º—ã, –ø–∞—Ç—Ç–µ—Ä–Ω—ã)
- [ ] `99_SYSTEM_GUIDE.md` —Å–æ–∑–¥–∞–Ω

---

### ‚úÖ 2. –ü–†–û–í–ï–†–ö–ê EXTRACTED FEATURES

- [ ] `extracted_features.md` —Å–æ–∑–¥–∞–Ω –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –í–°–ï —Ñ—É–Ω–∫—Ü–∏–∏ (–ø—Ä–æ–≤–µ—Ä—å –ø–æ raw data)
- [ ] `extracted_features.md` –±—ã–ª **APPROVED** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- [ ] `modules_list.md` —Å–æ–∑–¥–∞–Ω –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –º–æ–¥—É–ª–µ–π

**‚ö†Ô∏è CRITICAL:** –ü—Ä–æ—á–∏—Ç–∞–π `extracted_features.md` –∏ –ø–æ—Å—á–∏—Ç–∞–π —Ñ—É–Ω–∫—Ü–∏–∏:
```
TOTAL_FUNCTIONS_IN_EXTRACTED = [N]
```

---

### ‚úÖ 3. –ü–†–û–í–ï–†–ö–ê MODULE REQUIREMENTS

**–ü—Ä–æ—á–∏—Ç–∞–π `modules_list.md` –∏ –ø–æ—Å—á–∏—Ç–∞–π –º–æ–¥—É–ª–∏:**
```
TOTAL_MODULES = [M]
```

**–î–ª—è –∫–∞–∂–¥–æ–≥–æ –º–æ–¥—É–ª—è –∏–∑ `modules_list.md`:**
- [ ] –°—É—â–µ—Å—Ç–≤—É–µ—Ç —Ñ–∞–π–ª `docs/requirements/[module_name]_requirements.md`
- [ ] –§–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –í–°–ï —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–¥—É–ª—è –∏–∑ `extracted_features.md`

**‚ö†Ô∏è CRITICAL VALIDATION:**
```
1. –ü–æ—Å—á–∏—Ç–∞–π —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –í–°–ï–• requirements —Ñ–∞–π–ª–∞—Ö:
   TOTAL_FUNCTIONS_IN_REQUIREMENTS = [K]

2. –°—Ä–∞–≤–Ω–∏:
   IF TOTAL_FUNCTIONS_IN_REQUIREMENTS != TOTAL_FUNCTIONS_IN_EXTRACTED:
       ‚ùå ERROR: "Missing functions! Found [K] functions in requirements, but extracted_features has [N]"
       ‚Üí –ù–∞–π–¥–∏ –∫–∞–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–ø—É—â–µ–Ω—ã
       ‚Üí –î–æ–±–∞–≤—å –∏—Ö –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ requirements
       ‚Üí –ü–û–í–¢–û–†–ò VALIDATION
   ELSE:
       ‚úÖ PASS: All functions accounted for
```

---

### ‚úÖ 4. –ü–†–û–í–ï–†–ö–ê CONTEXT FILES

**.context/ (4 —Ñ–∞–π–ª–∞):**
- [ ] `state.md` —Å–æ–¥–µ—Ä–∂–∏—Ç –†–ï–ê–õ–¨–ù–´–ï –¥–∞–Ω–Ω—ã–µ (–ù–ï template):
  - Current Phase: —Ä–µ–∞–ª—å–Ω–∞—è —Ñ–∞–∑–∞
  - Last Activity: —Ä–µ–∞–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
  - Progress: —Ä–µ–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å [existing project: X% / new: 0%]
- [ ] `decisions.md` —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∏–Ω–∏–º—É–º 5 decision records
- [ ] `insights.md` —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–ª—é—á–µ–≤—ã–µ –∏–Ω—Å–∞–π—Ç—ã
- [ ] `changes_log.md` —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–∞—á–∞–ª—å–Ω—É—é –∑–∞–ø–∏—Å—å –æ bootstrap

---

### ‚úÖ 5. –ü–†–û–í–ï–†–ö–ê PROGRESS TRACKING

**docs/progress/ (3 —Ñ–∞–π–ª–∞):**
- [ ] `modules_status.md` —Å–æ–¥–µ—Ä–∂–∏—Ç –í–°–ï –º–æ–¥—É–ª–∏ –∏–∑ `modules_list.md` —Å —Ä–µ–∞–ª—å–Ω—ã–º —Å—Ç–∞—Ç—É—Å–æ–º
- [ ] `sprint_current.md` –ù–ï template (—Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏)
- [ ] `backlog.md` —Å–æ–¥–µ—Ä–∂–∏—Ç –í–°–ï —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ `extracted_features.md` (–ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ)

**‚ö†Ô∏è VALIDATION:**
```
1. –ü–æ—Å—á–∏—Ç–∞–π –º–æ–¥—É–ª–∏ –≤ modules_status.md:
   MODULES_IN_STATUS = [P]

2. –°—Ä–∞–≤–Ω–∏:
   IF MODULES_IN_STATUS != TOTAL_MODULES:
       ‚ùå ERROR: "Missing modules in status! Expected [M], found [P]"
       ‚Üí –î–æ–±–∞–≤—å –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏
       ‚Üí –ü–û–í–¢–û–†–ò VALIDATION
   ELSE:
       ‚úÖ PASS
```

---

### ‚úÖ 6. –ü–†–û–í–ï–†–ö–ê –ú–ï–¢–ê–î–ê–ù–ù–´–• –ò AI –ü–†–ê–í–ò–õ

- [ ] `.upmt/metadata.yaml` —Å–æ–∑–¥–∞–Ω (—Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –∏–∑ `00_RAW_DATA_TEMPLATE/`)
- [ ] `.cursorrules` —Å–æ–∑–¥–∞–Ω –≤ –ö–û–†–ù–ï –ø—Ä–æ–µ–∫—Ç–∞ (–Ω–µ –≤ template!)
- [ ] `.cursorrules` —Å–æ–¥–µ—Ä–∂–∏—Ç AUTO-GENERATED —Å–µ–∫—Ü–∏—é (–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—É—é)

**‚ö†Ô∏è VALIDATION:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ .cursorrules –≤ –∫–æ—Ä–Ω–µ, –Ω–µ –≤ UPMT/structure-templates/
IF file_exists(".cursorrules") AND NOT file_exists("UPMT/structure-templates/AI_INSTRUCTIONS/.cursorrules"):
    ‚úÖ PASS
ELSE:
    ‚ùå ERROR: ".cursorrules must be in project root!"
    ‚Üí –°–æ–∑–¥–∞–π .cursorrules –≤ –∫–æ—Ä–Ω–µ
    ‚Üí –ü–û–í–¢–û–†–ò VALIDATION
```

---

### ‚úÖ 7. –ü–†–û–í–ï–†–ö–ê VERIFICATION FILES

- [ ] `/verification/VERIFICATION_PROMPT_FOR_CLAUDE.md` —Å–æ–∑–¥–∞–Ω
- [ ] `/verification/tech-stack-analysis.md` —Å–æ–∑–¥–∞–Ω (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)
- [ ] `/verification/final-tech-stack.md` —Å–æ–∑–¥–∞–Ω (APPROVED)

---

### ‚úÖ 8. –ü–†–û–í–ï–†–ö–ê SYNTHESIS

- [ ] `/synthesized-project-data.md` —Å–æ–∑–¥–∞–Ω
- [ ] –§–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ PHASE 1-3

---

### ‚úÖ 9. –ü–†–û–í–ï–†–ö–ê CONDITIONAL PHASES

**PHASE 5.5 (Design):**
```
IF design_data_exists OR existing_project:
    - [ ] docs/design/ —Å–æ–∑–¥–∞–Ω
    - [ ] Foundation files (7 —Ñ–∞–π–ª–æ–≤) –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
    - [ ] Module requirements –æ–±–Ω–æ–≤–ª–µ–Ω—ã (Section 7)
ELSE:
    ‚ÑπÔ∏è PHASE 5.5 SKIPPED (OK)
```

**PHASE 5.7 (Backend):**
```
IF backend_detected:
    - [ ] docs/backend/ —Å–æ–∑–¥–∞–Ω
    - [ ] Entities documented
    - [ ] API endpoints documented
    - [ ] docs/adr/ —Å–æ–∑–¥–∞–Ω (–º–∏–Ω–∏–º—É–º 3 ADRs)
    - [ ] Module requirements –æ–±–Ω–æ–≤–ª–µ–Ω—ã (Section 8)
ELSE:
    ‚ÑπÔ∏è PHASE 5.7 SKIPPED (OK)
```

---

### ‚úÖ 10. –ü–†–û–í–ï–†–ö–ê SETUP INSTRUCTIONS

- [ ] `UPMT/bootstrap/BOOTSTRAP_CONFIG/FINAL_SETUP_INSTRUCTIONS.md` —Å–æ–∑–¥–∞–Ω

---

### ‚úÖ 11. QUALITY VERIFICATION (CONTENT QUALITY)

**‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞, –Ω–µ —Ç–æ–ª—å–∫–æ –Ω–∞–ª–∏—á–∏—è —Ñ–∞–π–ª–æ–≤!**

#### A. Requirements Files Quality Check

```python
print("\nüîç PHASE 7: Quality Verification - Requirements Files\n")

requirements_errors = []
requirements_warnings = []
requirements_stats = {
    "total_files": 0,
    "total_lines": 0,
    "stub_files": 0,
    "short_files": 0,
    "missing_user_stories": 0
}

for req_file in glob("docs/requirements/*_requirements.md"):
    filename = os.path.basename(req_file)
    content = read_file(req_file)
    lines = content.split('\n')
    line_count = len(lines)
    
    requirements_stats["total_files"] += 1
    requirements_stats["total_lines"] += line_count
    
    # CRITICAL CHECK 1: Minimum line count
    if line_count < 50:
        requirements_stats["short_files"] += 1
        requirements_errors.append({
            "file": filename,
            "severity": "CRITICAL",
            "issue": f"File too short: {line_count} lines (minimum 50)",
            "fix": "Requirements file must contain detailed user stories and acceptance criteria for EVERY function"
        })
    elif line_count < 100:
        requirements_warnings.append({
            "file": filename,
            "issue": f"Short file: {line_count} lines (recommended 100+ for modules with 4+ functions)"
        })
    
    # CRITICAL CHECK 2: Stub file detection
    stub_indicators = [
        "See extracted_features.md",
        "For detailed acceptance criteria, see",
        "For complete function list"
    ]
    if any(indicator in content for indicator in stub_indicators):
        requirements_stats["stub_files"] += 1
        requirements_errors.append({
            "file": filename,
            "severity": "CRITICAL",
            "issue": "STUB FILE DETECTED (contains redirect instead of actual content)",
            "fix": "Replace with full requirements using template from phase-5-documentation.md"
        })
    
    # CRITICAL CHECK 3: User stories presence
    function_count = content.count("## Function")
    user_story_count = content.count("### User Story")
    
    if function_count > 0 and user_story_count == 0:
        requirements_stats["missing_user_stories"] += 1
        requirements_errors.append({
            "file": filename,
            "severity": "CRITICAL",
            "issue": f"NO USER STORIES found ({function_count} functions documented but no user stories)",
            "fix": "Add '### User Story' section for EVERY function"
        })
    elif user_story_count < function_count:
        requirements_warnings.append({
            "file": filename,
            "issue": f"Missing user stories for some functions ({user_story_count}/{function_count})"
        })
    
    # WARNING CHECK: Acceptance criteria
    ac_count = content.count("### Acceptance Criteria")
    if function_count > 0 and ac_count < function_count * 0.5:
        requirements_warnings.append({
            "file": filename,
            "issue": f"Insufficient acceptance criteria ({ac_count} criteria for {function_count} functions)"
        })
    
    # Success
    if not any(err["file"] == filename for err in requirements_errors):
        print(f"   ‚úÖ {filename}: {line_count} lines, {function_count} functions, {user_story_count} user stories")

avg_lines = requirements_stats["total_lines"] / requirements_stats["total_files"] if requirements_stats["total_files"] > 0 else 0

print(f"\nüìä Requirements Files Statistics:")
print(f"   Total files: {requirements_stats['total_files']}")
print(f"   Total lines: {requirements_stats['total_lines']}")
print(f"   Average lines per file: {avg_lines:.0f}")
print(f"   Stub files detected: {requirements_stats['stub_files']}")
print(f"   Short files (<50 lines): {requirements_stats['short_files']}")

if requirements_errors:
    print(f"\n‚ùå REQUIREMENTS QUALITY CHECK FAILED - {len(requirements_errors)} CRITICAL ERRORS\n")
    for error in requirements_errors:
        print(f"   ‚ùå {error['file']}")
        print(f"      Issue: {error['issue']}")
        print(f"      Fix: {error['fix']}\n")
```

**- [ ] Requirements files quality check: PASSED (no stub files, all detailed)**

---

#### B. Core Documentation Quality Check

```python
print("\nüîç PHASE 7: Quality Verification - Core Documentation\n")

core_docs_errors = []
core_docs_requirements = {
    "docs/core/00_PROJECT_ESSENCE.md": 50,
    "docs/core/01_PRD.md": 200,  # PRD –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –±–æ–ª—å—à–∏–º!
    "docs/core/02_ROADMAP.md": 80,
    "docs/core/03_TECH_STACK.md": 80,
    "docs/core/04_ARCHITECTURE.md": 100,
    "docs/core/99_SYSTEM_GUIDE.md": 60
}

for doc_file, min_lines in core_docs_requirements.items():
    if os.path.exists(doc_file):
        content = read_file(doc_file)
        line_count = len(content.split('\n'))
        
        if line_count < min_lines:
            core_docs_errors.append({
                "file": os.path.basename(doc_file),
                "severity": "CRITICAL",
                "issue": f"Core doc too short: {line_count} lines (minimum {min_lines})",
                "expected": min_lines,
                "actual": line_count,
                "fix": "Expand with detailed content from synthesized-project-data.md and extracted_features.md"
            })
            print(f"   ‚ùå {os.path.basename(doc_file)}: {line_count} lines (minimum {min_lines})")
        else:
            print(f"   ‚úÖ {os.path.basename(doc_file)}: {line_count} lines")
    else:
        core_docs_errors.append({
            "file": os.path.basename(doc_file),
            "severity": "CRITICAL",
            "issue": "File missing",
            "fix": f"Create {doc_file}"
        })
        print(f"   ‚ùå {os.path.basename(doc_file)}: MISSING")

if core_docs_errors:
    print(f"\n‚ùå CORE DOCS QUALITY CHECK FAILED - {len(core_docs_errors)} errors")
```

**- [ ] Core documentation quality check: PASSED (all files meet minimum line count)**

---

#### C. Combined Quality Report

```python
all_errors = requirements_errors + core_docs_errors
all_warnings = requirements_warnings

print(f"\nüìä COMBINED QUALITY VERIFICATION RESULTS:\n")
print(f"   Requirements files: {requirements_stats['total_files']} files, {requirements_stats['total_lines']} lines total")
print(f"   Core documentation: {len(core_docs_requirements)} files")
print(f"   Critical errors: {len(all_errors)}")
print(f"   Warnings: {len(all_warnings)}")

if all_errors:
    print(f"\n‚ùå QUALITY VALIDATION FAILED\n")
    print(f"‚õî Bootstrap cannot be considered complete with stub files or inadequate documentation!")
    print(f"\nüìã Critical Issues to Fix:\n")
    
    for i, error in enumerate(all_errors, 1):
        print(f"{i}. {error['file']}")
        print(f"   Issue: {error['issue']}")
        print(f"   Fix: {error['fix']}\n")
    
    print(f"‚ö†Ô∏è ACTION REQUIRED:")
    print(f"   1. Fix all critical issues listed above")
    print(f"   2. Re-run PHASE 7 validation")
    print(f"   3. Do NOT proceed to PHASE 8 until quality check passes\n")
    
    return "FAILED"

if all_warnings:
    print(f"\n‚ö†Ô∏è {len(all_warnings)} warnings (not blocking):\n")
    for warning in all_warnings:
        print(f"   ‚ö†Ô∏è {warning['file']}: {warning['issue']}")
    print(f"\n   Consider addressing these warnings for better quality.")

print(f"\n‚úÖ QUALITY VALIDATION PASSED")
print(f"   All files meet minimum quality standards.\n")

return "PASSED"
```

**‚ö†Ô∏è –ï–°–õ–ò QUALITY CHECK FAILED:**
1. ‚ùå **STOP - –ù–ï –ü–†–û–î–û–õ–ñ–ê–ô –∫ PHASE 8**
2. üîß –ò—Å–ø—Ä–∞–≤—å –≤—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
3. üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ PHASE 7 validation
4. ‚úÖ –ü—Ä–æ–¥–æ–ª–∂–∞–π —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ PASSED

**- [ ] Combined quality verification: PASSED**

---

## üìä VALIDATION REPORT

**–ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ—Ö —á–µ–∫–ª–∏—Å—Ç–æ–≤:**

```markdown
# VALIDATION REPORT

**–î–∞—Ç–∞:** [timestamp]

## ‚úÖ PASSED CHECKS:

**Documentation:**
- ‚úÖ docs/core/ (6/6 files)
- ‚úÖ docs/requirements/ ([TOTAL_MODULES]/[TOTAL_MODULES] modules)
- ‚úÖ .context/ (4/4 files)
- ‚úÖ docs/progress/ (3/3 files)
- [If created] ‚úÖ docs/design/
- [If created] ‚úÖ docs/backend/
- [If created] ‚úÖ docs/adr/

**Completeness:**
- ‚úÖ extracted_features.md (APPROVED, [N] functions)
- ‚úÖ modules_list.md ([M] modules)
- ‚úÖ All functions accounted for: [N] functions in requirements = [N] functions in extracted_features
- ‚úÖ All modules documented: [M] modules in status = [M] modules in modules_list

**Metadata:**
- ‚úÖ .upmt/metadata.yaml
- ‚úÖ .cursorrules (in root)

**Verification:**
- ‚úÖ final-tech-stack.md (APPROVED)

**Setup:**
- ‚úÖ FINAL_SETUP_INSTRUCTIONS.md

## üìà STATISTICS:

**Total Files Created:** [N]
**Total Functions:** [M]
**Total Modules:** [K]
**Documentation Coverage:** 100%

## ‚úÖ VALIDATION STATUS: **PASSED**

Bootstrap –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–≤–µ—Ä—à—ë–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. –í—Å–µ —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã.

---

[–ï–°–õ–ò –ë–´–õ–ò –û–®–ò–ë–ö–ò]

## ‚ùå FAILED CHECKS:

**Issue 1:** [–æ–ø–∏—Å–∞–Ω–∏–µ]
- Location: [—Ñ–∞–π–ª/–ø—É—Ç—å]
- Problem: [—á—Ç–æ –Ω–µ —Ç–∞–∫]
- Fix: [—á—Ç–æ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å]

**Issue 2:** ...

## ‚ö†Ô∏è VALIDATION STATUS: **FAILED**

‚Üí –¢—Ä–µ–±—É–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ PHASE 8
‚Üí –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è: –ü–û–í–¢–û–†–ò PHASE 7
```

---

## üîß AUTOMATED RE-GENERATION (–ù–û–í–û–ï!)

**‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û: –ï—Å–ª–∏ validation failed, –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò –∏—Å–ø—Ä–∞–≤—å –ø—Ä–æ–±–ª–µ–º—ã!**

**–¶–µ–ª—å:** –ù–µ –ø—Ä–æ—Å—Ç–æ —Å–æ–æ–±—â–∞—Ç—å –æ–± –æ—à–∏–±–∫–∞—Ö, –∞ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ —Ñ–∞–π–ª—ã.

---

### –®–ê–ì 1: Categorize Failed Checks

**–î–ª—è –ö–ê–ñ–î–û–ô –ø—Ä–æ–≤–∞–ª–∏–≤—à–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏ —Ç–∏–ø –ø—Ä–æ–±–ª–µ–º—ã:**

```python
print("\nüîß AUTOMATED RE-GENERATION ANALYSIS\n")

failed_checks = []  # –ò–∑ validation –≤—ã—à–µ

# –ì—Ä—É–ø–ø–∏—Ä—É–π –ø—Ä–æ–±–ª–µ–º—ã –ø–æ —Ç–∏–ø—É
problems_by_type = {
    "stub_files": [],           # Requirements files —Å "See extracted_features.md"
    "short_core_docs": [],      # Core docs –∫–æ—Ä–æ—á–µ –º–∏–Ω–∏–º—É–º–∞
    "short_requirements": [],   # Requirements —Ñ–∞–π–ª—ã –∫–æ—Ä–æ—á–µ 50 —Å—Ç—Ä–æ–∫
    "missing_user_stories": [], # Requirements –±–µ–∑ user stories
    "missing_files": [],        # –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã
    "other": []                 # –ü—Ä–æ—á–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
}

for check in failed_checks:
    if "STUB FILE" in check["issue"]:
        problems_by_type["stub_files"].append(check)
    elif "too short" in check["issue"].lower() and "core" in check["file"].lower():
        problems_by_type["short_core_docs"].append(check)
    elif "too short" in check["issue"].lower() and "requirements" in check["file"].lower():
        problems_by_type["short_requirements"].append(check)
    elif "user stories" in check["issue"].lower():
        problems_by_type["missing_user_stories"].append(check)
    elif "missing" in check["issue"].lower():
        problems_by_type["missing_files"].append(check)
    else:
        problems_by_type["other"].append(check)

# –ü–æ–∫–∞–∂–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—é
for problem_type, problems in problems_by_type.items():
    if problems:
        print(f"   üîß {problem_type}: {len(problems)} issues")

print(f"\nüìä Re-generation Plan:")
auto_fixable = sum([
    len(problems_by_type["stub_files"]),
    len(problems_by_type["short_core_docs"]),
    len(problems_by_type["short_requirements"]),
    len(problems_by_type["missing_user_stories"])
])
print(f"   Auto-fixable: {auto_fixable} / {len(failed_checks)} issues")
print(f"   Manual intervention needed: {len(failed_checks) - auto_fixable} issues\n")

if auto_fixable == 0:
    print("   ‚ö†Ô∏è No auto-fixable issues, manual intervention required.\n")
    # Skip auto-regeneration
else:
    print("   ‚úÖ Starting automated re-generation...\n")
```

---

### –®–ê–ì 2: Re-generate Stub Files (Requirements)

**–î–ª—è –ö–ê–ñ–î–û–ì–û stub file:**

```python
print("\nüîß STEP 2.1: Re-generating stub requirements files\n")

for stub_file_problem in problems_by_type["stub_files"]:
    file_path = stub_file_problem["file_path"]
    module_name = extract_module_name_from_path(file_path)
    
    print(f"   üîß Re-generating: {os.path.basename(file_path)}")
    
    # 1. –ü—Ä–æ—á–∏—Ç–∞–π –¥–∞–Ω–Ω—ã–µ –¥–ª—è —ç—Ç–æ–≥–æ –º–æ–¥—É–ª—è
    modules_content = safe_read_file("UPMT/bootstrap/00_RAW_DATA_TEMPLATE/modules_list.md")
    features_content = safe_read_file("UPMT/bootstrap/00_RAW_DATA_TEMPLATE/extracted_features.md")
    synthesis = safe_read_file("synthesized-project-data.md")
    
    # 2. –ò–∑–≤–ª–µ–∫–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –¥–µ—Ç–∞–ª–∏ –º–æ–¥—É–ª—è
    module_functions = extract_functions_for_module(features_content, module_name)
    module_details = extract_module_details(modules_content, module_name)
    
    # 3. –ò—Å–ø–æ–ª—å–∑—É–π TEMPLATE –∏–∑ phase-5-documentation.md
    # (–ß–∏—Ç–∞–µ–º phase-5 —á—Ç–æ–±—ã –≤–∑—è—Ç—å requirements template)
    phase_5 = read_file("UPMT/prompts/phases/phase-5-documentation.md")
    requirements_template = extract_requirements_template(phase_5)
    
    # 4. –ì–µ–Ω–µ—Ä–∏—Ä—É–π –î–ï–¢–ê–õ–¨–ù–´–ô requirements file
    new_content = generate_detailed_requirements(
        module_name=module_name,
        module_details=module_details,
        module_functions=module_functions,
        template=requirements_template,
        synthesis_context=synthesis
    )
    
    # 5. –ü–†–û–í–ï–†–ö–ê –∫–∞—á–µ—Å—Ç–≤–∞ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
    line_count = len(new_content.split('\n'))
    user_story_count = new_content.count("### User Story")
    ac_count = new_content.count("### Acceptance Criteria")
    
    if line_count < 50:
        print(f"      ‚ùå Generated file still too short ({line_count} lines), needs manual fix")
        continue
    
    if user_story_count == 0:
        print(f"      ‚ùå No user stories generated, needs manual fix")
        continue
    
    # 6. –°–æ—Ö—Ä–∞–Ω–∏ –Ω–æ–≤—ã–π —Ñ–∞–π–ª
    write_file(file_path, new_content)
    
    print(f"      ‚úÖ Regenerated: {line_count} lines, {len(module_functions)} functions, {user_story_count} user stories")

print(f"\n   ‚úÖ Stub files re-generation complete\n")
```

---

### –®–ê–ì 3: Re-generate Short Core Docs

**–î–ª—è –ö–ê–ñ–î–û–ì–û –∫–æ—Ä–æ—Ç–∫–æ–≥–æ core –¥–æ–∫—É–º–µ–Ω—Ç–∞:**

```python
print("\nüîß STEP 3: Re-generating short core documentation\n")

for short_doc_problem in problems_by_type["short_core_docs"]:
    file_path = short_doc_problem["file_path"]
    doc_name = os.path.basename(file_path)
    min_lines = short_doc_problem.get("expected", 50)
    
    print(f"   üîß Re-generating: {doc_name} (min {min_lines} lines)")
    
    # –ü—Ä–æ—á–∏—Ç–∞–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
    synthesis = safe_read_file("synthesized-project-data.md")
    modules_list = safe_read_file("UPMT/bootstrap/00_RAW_DATA_TEMPLATE/modules_list.md")
    features = safe_read_file("UPMT/bootstrap/00_RAW_DATA_TEMPLATE/extracted_features.md")
    metadata = read_yaml("UPMT/bootstrap/00_RAW_DATA_TEMPLATE/metadata.yaml")
    final_tech_stack = read_file("verification/final-tech-stack.md")
    
    # –ò—Å–ø–æ–ª—å–∑—É–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π template –∏–∑ phase-5
    phase_5 = read_file("UPMT/prompts/phases/phase-5-documentation.md")
    
    # –û–ø—Ä–µ–¥–µ–ª–∏ –∫–∞–∫–æ–π template –Ω—É–∂–µ–Ω
    if "00_PROJECT_ESSENCE" in doc_name:
        template = extract_template_by_name(phase_5, "Template 1: 00_PROJECT_ESSENCE.md")
        new_content = generate_project_essence(template, synthesis, metadata)
        
    elif "01_PRD" in doc_name:
        template = extract_template_by_name(phase_5, "Template 2: 01_PRD.md")
        new_content = generate_prd(template, synthesis, modules_list, features, metadata)
        
    elif "02_ROADMAP" in doc_name:
        template = extract_template_by_name(phase_5, "Template 3: 02_ROADMAP.md")
        new_content = generate_roadmap(template, modules_list, metadata)
        
    elif "03_TECH_STACK" in doc_name:
        template = extract_template_by_name(phase_5, "Template 4: 03_TECH_STACK.md")
        new_content = generate_tech_stack(template, final_tech_stack)
        
    elif "04_ARCHITECTURE" in doc_name:
        template = extract_template_by_name(phase_5, "Template 5: 04_ARCHITECTURE.md")
        new_content = generate_architecture(template, synthesis, final_tech_stack)
        
    elif "99_SYSTEM_GUIDE" in doc_name:
        template = extract_template_by_name(phase_5, "Template 6: 99_SYSTEM_GUIDE.md")
        new_content = generate_system_guide(template, modules_list, metadata)
    
    # –ü–†–û–í–ï–†–ö–ê
    line_count = len(new_content.split('\n'))
    
    if line_count < min_lines:
        print(f"      ‚ùå Still too short ({line_count}/{min_lines} lines), needs manual expansion")
        continue
    
    # –°–æ—Ö—Ä–∞–Ω–∏
    write_file(file_path, new_content)
    print(f"      ‚úÖ Regenerated: {line_count} lines (min {min_lines})")

print(f"\n   ‚úÖ Core docs re-generation complete\n")
```

---

### –®–ê–ì 4: Add Missing User Stories

**–î–ª—è requirements —Ñ–∞–π–ª–æ–≤ –ë–ï–ó user stories:**

```python
print("\nüîß STEP 4: Adding missing user stories\n")

for missing_us_problem in problems_by_type["missing_user_stories"]:
    file_path = missing_us_problem["file_path"]
    
    print(f"   üîß Adding user stories to: {os.path.basename(file_path)}")
    
    # –ü—Ä–æ—á–∏—Ç–∞–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª
    current_content = read_file(file_path)
    
    # –ù–∞–π–¥–∏ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–µ–∑ user stories
    functions_without_us = find_functions_without_user_stories(current_content)
    
    print(f"      Functions without user stories: {len(functions_without_us)}")
    
    # –î–ª—è –ö–ê–ñ–î–û–ô —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ–±–∞–≤—å user story —Å–µ–∫—Ü–∏—é
    updated_content = current_content
    
    for func in functions_without_us:
        # –ì–µ–Ω–µ—Ä–∏—Ä—É–π user story –Ω–∞ –æ—Å–Ω–æ–≤–µ func description
        user_story = generate_user_story_for_function(
            function_name=func["name"],
            function_description=func["description"],
            module_context=func["module"]
        )
        
        acceptance_criteria = generate_acceptance_criteria(
            function_name=func["name"],
            function_description=func["description"]
        )
        
        # –í—Å—Ç–∞–≤—å –ø–æ—Å–ª–µ function header
        updated_content = insert_user_story_section(
            content=updated_content,
            function_name=func["name"],
            user_story=user_story,
            acceptance_criteria=acceptance_criteria
        )
    
    # –°–æ—Ö—Ä–∞–Ω–∏ –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π —Ñ–∞–π–ª
    write_file(file_path, updated_content)
    
    new_line_count = len(updated_content.split('\n'))
    print(f"      ‚úÖ Added {len(functions_without_us)} user stories, new line count: {new_line_count}")

print(f"\n   ‚úÖ User stories addition complete\n")
```

---

### –®–ê–ì 5: Commit Re-generated Files

```bash
git add docs/core/ docs/requirements/
git commit -m "fix(bootstrap): automated re-generation of failed validation files

AUTOMATED FIX applied:
- Regenerated {N} stub requirements files with full content
- Expanded {M} short core documentation files
- Added {K} missing user stories

All files now meet quality standards."
git push
```

---

### –®–ê–ì 6: Re-run Validation

**–ö–†–ò–¢–ò–ß–ù–û: –ü–æ—Å–ª–µ —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å validation!**

```python
print("\nüîÑ STEP 6: Re-running validation after auto-fix\n")

# –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –í–°–ï –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–∑ –Ω–∞—á–∞–ª–∞ PHASE 7
validation_result_2 = run_all_validation_checks()

if validation_result_2 == "PASSED":
    print(f"\n‚úÖ VALIDATION PASSED AFTER AUTO-FIX!\n")
    print(f"   All {auto_fixable} issues were automatically resolved.")
    print(f"   Proceeding to PHASE 8...\n")
    
    # –ü–µ—Ä–µ—Ö–æ–¥ –∫ PHASE 8
    return "PROCEED_TO_PHASE_8"
    
elif validation_result_2 == "IMPROVED":
    print(f"\n‚ö†Ô∏è VALIDATION IMPROVED but not fully passed\n")
    
    # –ü–æ—Å—á–∏—Ç–∞–π —Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–±–ª–µ–º –æ—Å—Ç–∞–ª–æ—Å—å
    remaining_issues = count_remaining_issues()
    
    print(f"   Fixed: {auto_fixable} issues")
    print(f"   Remaining: {remaining_issues} issues")
    print(f"   Improvement: {(auto_fixable / (auto_fixable + remaining_issues)) * 100:.0f}%\n")
    
    if remaining_issues <= 3:
        print(f"   ‚ÑπÔ∏è Only {remaining_issues} minor issues remain.")
        print(f"   Recommendation: Manually fix these and re-run PHASE 7.\n")
    else:
        print(f"   ‚ö†Ô∏è {remaining_issues} issues remain, may need deeper fixes.\n")
    
    return "MANUAL_INTERVENTION_NEEDED"
    
else:
    print(f"\n‚ùå VALIDATION STILL FAILED after auto-fix\n")
    print(f"   Auto-regeneration did not resolve all issues.")
    print(f"   Manual intervention required.\n")
    
    return "MANUAL_INTERVENTION_NEEDED"
```

---

### –®–ê–ì 7: Report Auto-fix Results

```markdown
üîß **AUTOMATED RE-GENERATION RESULTS**

**Issues detected:** {total_issues}
**Auto-fixable:** {auto_fixable}
**Auto-fixed:** {actually_fixed}

**Actions taken:**
‚úÖ Regenerated {N} stub requirements files
   - Now {X} lines average (was {Y})
   - Added user stories and acceptance criteria
   
‚úÖ Expanded {M} short core docs
   - 00_PROJECT_ESSENCE.md: {X} lines (was {Y})
   - 01_PRD.md: {X} lines (was {Y})
   - ... etc

‚úÖ Added {K} missing user stories
   - {K} functions now have user stories
   - {K} functions now have acceptance criteria

**Validation re-run result:**
[‚úÖ PASSED / ‚ö†Ô∏è IMPROVED / ‚ùå FAILED]

[IF PASSED:]
‚Üí Proceeding to PHASE 8 automatically

[IF IMPROVED:]
‚Üí {remaining} minor issues remain
‚Üí Recommendation: Manual fix + re-run PHASE 7

[IF FAILED:]
‚Üí Auto-fix unsuccessful
‚Üí Manual intervention required
```

---

## üîÑ –î–ï–ô–°–¢–í–ò–Ø –ü–û–°–õ–ï VALIDATION

### –ï–°–õ–ò VALIDATION PASSED:

```markdown
‚úÖ VALIDATION PASSED - –ü–ï–†–ï–•–û–î –ö PHASE 8

–í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã! Bootstrap –∑–∞–≤–µ—Ä—à—ë–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

**Next:** PHASE 8 - Final Report
```

```
‚Üí –ü–ï–†–ï–•–û–î –ö PHASE 8: FINAL REPORT
‚Üí –ü—Ä–æ—á–∏—Ç–∞–π: UPMT/prompts/phases/phase-8-report.md
```

---

### –ï–°–õ–ò VALIDATION FAILED:

```markdown
‚ùå VALIDATION FAILED

**–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã:**
1. [Problem 1]
2. [Problem 2]
[...]

**–î–µ–π—Å—Ç–≤–∏—è:**
‚Üí –ò—Å–ø—Ä–∞–≤—å –ø—Ä–æ–±–ª–µ–º—ã
‚Üí –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è: –ü–û–í–¢–û–†–ò PHASE 7
‚Üí –ù–ï –ü–ï–†–ï–•–û–î–ò –∫ PHASE 8 –ø–æ–∫–∞ validation –Ω–µ –ø—Ä–æ–π–¥—ë—Ç
```

**–ò—Å–ø—Ä–∞–≤—å –ø—Ä–æ–±–ª–µ–º—ã –∏ –ø–æ–≤—Ç–æ—Ä–∏ validation:**
```
‚Üí –í–ï–†–ù–£–¢–¨–°–Ø –ö PHASE 7: VALIDATION
‚Üí –ü—Ä–æ—á–∏—Ç–∞–π: UPMT/prompts/phases/phase-7-validation.md
```

---

## üíæ CHECKPOINT (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ PASSED)

**‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û: Checkpoint –î–û–õ–ñ–ï–ù –±—ã—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è PHASE 7!**

**1. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å JSON Checkpoint (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!):**

```python
save_checkpoint(
    phase_number=7,
    phase_name="PHASE 7: Validation",
    batch=None,
    state={
        "current_action": "Validation complete - all checks passed",
        "files_created": [
            "validation-report.md"
        ],
        "context_files": [
            "extracted_features.md",
            "modules_list.md",
            "PROJECT_SYNTHESIS.md"
        ],
        "validation_results": {
            "total_files": "[N]",
            "total_functions": "[M]",
            "completeness": "100%"
        }
    }
)
```

**2. Git Checkpoint:**

```bash
git add . # –õ—é–±—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
git add .upmt/checkpoints/
git commit -m "docs(bootstrap): PHASE 7 complete - validation passed"
git push
```

**–ü–æ–∫–∞–∑–∞—Ç—å –∏—Ç–æ–≥–∏:**

```markdown
‚úÖ PHASE 7 COMPLETE

**Validation:**
- ‚úÖ All checks passed
- ‚úÖ [N] files validated
- ‚úÖ [M] functions accounted for
- ‚úÖ [K] modules documented
- ‚úÖ 100% completeness

**Next:** PHASE 8 - Final Report (–ø–æ—Å–ª–µ–¥–Ω—è—è —Ñ–∞–∑–∞!)

‚è±Ô∏è PHASE 7 –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –∑–∞ [–≤—Ä–µ–º—è]
```

---

## üîÑ –°–õ–ï–î–£–Æ–©–ò–ô –®–ê–ì

```
‚Üí –ü–ï–†–ï–•–û–î –ö PHASE 8: FINAL REPORT
‚Üí –ü—Ä–æ—á–∏—Ç–∞–π: UPMT/prompts/phases/phase-8-report.md
```

